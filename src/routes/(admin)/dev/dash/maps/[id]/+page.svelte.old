<script lang="ts">
	import { onMount } from 'svelte';

	export let data;

	// Make sure to use onMount and render active-table on load
	onMount(async () => {
		await import('active-table');
		isLoaded = true;
	});

	let isLoaded = false;
	const tableData = [
		['ID', 'Type', 'Note', 'Note from Plonkit?', 'Has image?']
	];
	data.map?.metas.forEach(meta => {
		tableData.push([meta.id, meta.type, meta.note, meta.noteFromPlonkit, meta.hasImage])
	});
	console.log(tableData);
</script>

{#if isLoaded}
	<!-- This project is using Svelte 4.2.2 -->

	<!-- !!!!Svelte version 4.2.2 or higher!!!! -->
	<!-- data is an example of passing a state object into the property -->
	<!-- headerStyles is an example of directly passing an object -->
	<active-table
		data={tableData}
		headerStyles={{default:{backgroundColor: "#d6d6d630"}}}
		dragRows={false}
		displayAddNewColumn={false}
		customColumnsSettings={[
			{ "headerName": "ID", "cellStyle": {"display": "none"}},
			{ "headerName": "Type", "isHeaderTextEditable": false, availableDefaultColumnTypes: ["string"] },
			{ "headerName": "Note", "isHeaderTextEditable": false, availableDefaultColumnTypes: ["string"] },
			{ "headerName": "Note from Plonkit?", "defaultColumnTypeName": "Checkbox", "isHeaderTextEditable": false, availableDefaultColumnTypes: ["Checkbox"] },
			{ "headerName": "Has image?", "defaultColumnTypeName": "Checkbox", "isHeaderTextEditable": false, availableDefaultColumnTypes: ["Checkbox"] },
		]}
		rowDropdown={{"displaySettings":{"isAvailable": true}, "canEditHeaderRow": false}}
	/>
{/if}